{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nvar _jsxFileName = \"/home/redex/environments/instagram/frontend/components/main/Feed.js\";\nimport firebase from 'firebase';\nimport React, { useEffect, useState, Component } from 'react';\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport FlatList from \"react-native-web/dist/exports/FlatList\";\nimport ActivityIndicator from \"react-native-web/dist/exports/ActivityIndicator\";\nimport Button from \"react-native-web/dist/exports/Button\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Touchable from \"react-native-web/dist/exports/Touchable\";\nimport { connect } from 'react-redux';\nimport MarerialCommunityIcons from \"@expo/vector-icons/MaterialCommunityIcons\";\nimport { NickName, PostCreatorInfo, UserAvatar } from \"../../Styles\";\nexport function Feed(props) {\n  var _this = this;\n\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      posts = _useState2[0],\n      setPosts = _useState2[1];\n\n  var _useState3 = useState(false),\n      _useState4 = _slicedToArray(_useState3, 2),\n      contentIsLoaded = _useState4[0],\n      setContentIsLoaded = _useState4[1];\n\n  useEffect(function () {\n    if (props.following !== undefined && props.feed !== undefined) {\n      setContentIsLoaded(true);\n\n      if (props.usersFollowingLoaded === props.following.length && props.following.length !== 0) {\n        props.feed.sort(function (x, y) {\n          return x.created - y.created;\n        });\n        setPosts(props.feed);\n      }\n    }\n  }, [props.usersFollowingLoaded, props.following, props.feed]);\n\n  var onLikePress = function onLikePress(uid, postId) {};\n\n  var onDislikePress = function onDislikePress(uid, postId) {};\n\n  if (!contentIsLoaded) {\n    return React.createElement(View, {\n      style: styles.indicator,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 38,\n        columnNumber: 13\n      }\n    }, React.createElement(ActivityIndicator, {\n      size: \"large\",\n      color: \"black\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 17\n      }\n    }));\n  }\n\n  return React.createElement(View, {\n    style: styles.container,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 9\n    }\n  }, React.createElement(View, {\n    style: styles.userGallery,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 13\n    }\n  }, React.createElement(FlatList, {\n    numColumns: 1,\n    horizontal: false,\n    data: posts,\n    renderItem: function renderItem(_ref) {\n      var item = _ref.item;\n      return React.createElement(View, {\n        style: {\n          marginTop: 15\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 54,\n          columnNumber: 21\n        }\n      }, React.createElement(PostCreatorInfo, {\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 55,\n          columnNumber: 25\n        }\n      }, React.createElement(TouchableOpacity, {\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Profile\", {\n            uid: item.user.uid\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 29\n        }\n      }, React.createElement(UserAvatar, {\n        source: require(\"../../placeholder-images/Profile_avatar_placeholder_large.png\"),\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58,\n          columnNumber: 33\n        }\n      })), React.createElement(View, {\n        style: {\n          height: \"100%\",\n          marginLeft: 7\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61,\n          columnNumber: 29\n        }\n      }, React.createElement(NickName, {\n        style: {\n          marginTop: 4\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 62,\n          columnNumber: 33\n        }\n      }, item.user.name), React.createElement(Text, {\n        style: {\n          marginTop: 3\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 63,\n          columnNumber: 33\n        }\n      }, item.caption))), React.createElement(Image, {\n        style: styles.image,\n        source: {\n          uri: item.downloadURL\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 66,\n          columnNumber: 25\n        }\n      }), item.currentUserLike ? React.createElement(TouchableOpacity, {\n        style: {\n          marginLeft: 2\n        },\n        onPress: function onPress() {\n          return onDislikePress(item.user.uid, item.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 29\n        }\n      }, React.createElement(MarerialCommunityIcons, {\n        name: \"heart\",\n        color: \"#E94D4D\",\n        size: 30,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 73,\n          columnNumber: 33\n        }\n      })) : React.createElement(TouchableOpacity, {\n        style: {\n          marginLeft: 2\n        },\n        onPress: function onPress() {\n          return onLikePress(item.user.uid, item.id);\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 29\n        }\n      }, React.createElement(MarerialCommunityIcons, {\n        name: \"heart-outline\",\n        color: \"#E94D4D\",\n        size: 30,\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 33\n        }\n      })), React.createElement(Text, {\n        style: {\n          marginLeft: 5\n        },\n        onPress: function onPress() {\n          return props.navigation.navigate(\"Comments\", {\n            postId: item.id,\n            uid: item.user.uid\n          });\n        },\n        __self: _this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 82,\n          columnNumber: 25\n        }\n      }, \"View all comments...\"));\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 49,\n      columnNumber: 17\n    }\n  })));\n}\nvar styles = StyleSheet.create({\n  container: {\n    flex: 1,\n    marginTop: 40\n  },\n  userInfo: {\n    margin: 20\n  },\n  userGallery: {\n    flex: 1\n  },\n  imageContainer: {\n    flex: 1 / 3,\n    marginTop: 15\n  },\n  image: {\n    flex: 1,\n    aspectRatio: 1 / 1\n  },\n  indicator: {\n    flex: 1,\n    justifyContent: 'center'\n  }\n});\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    currentUser: state.userState.currentUser,\n    following: state.userState.following,\n    feed: state.usersState.feed,\n    usersFollowingLoaded: state.usersState.usersFollowingLoaded\n  };\n};\n\nexport default connect(mapStateToProps, null)(Feed);","map":{"version":3,"sources":["/home/redex/environments/instagram/frontend/components/main/Feed.js"],"names":["firebase","React","useEffect","useState","Component","connect","MarerialCommunityIcons","NickName","PostCreatorInfo","UserAvatar","Feed","props","posts","setPosts","contentIsLoaded","setContentIsLoaded","following","undefined","feed","usersFollowingLoaded","length","sort","x","y","created","onLikePress","uid","postId","onDislikePress","styles","indicator","container","userGallery","item","marginTop","navigation","navigate","user","require","height","marginLeft","name","caption","image","uri","downloadURL","currentUserLike","id","StyleSheet","create","flex","userInfo","margin","imageContainer","aspectRatio","justifyContent","mapStateToProps","state","currentUser","userState","usersState"],"mappings":"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","sourcesContent":["import firebase from 'firebase';\nimport React, { useEffect, useState, Component } from 'react';\nimport { StyleSheet, View, Text, Image, FlatList, ActivityIndicator, Button, TouchableOpacity, Touchable } from 'react-native';\nimport { connect } from 'react-redux';\nimport MarerialCommunityIcons from 'react-native-vector-icons/MaterialCommunityIcons'\nimport { NickName, PostCreatorInfo, UserAvatar } from '../../Styles';\n\n\nexport function Feed(props){\n    const [posts, setPosts] = useState([])\n    const [contentIsLoaded, setContentIsLoaded] = useState(false)\n\n\n    useEffect(() => {\n        if (props.following !== undefined && props.feed !== undefined){\n            setContentIsLoaded(true)\n            if (props.usersFollowingLoaded === props.following.length && props.following.length !== 0){\n                props.feed.sort(function (x,y){\n                    return x.created - y.created\n                })\n    \n                setPosts(props.feed)\n            }\n        }\n        \n    }, [props.usersFollowingLoaded, props.following, props.feed])\n\n    const onLikePress = (uid, postId) => {\n        \n    }\n\n    const onDislikePress = (uid, postId) => {\n        \n    }\n\n    if(!contentIsLoaded){\n        return(\n            <View style={styles.indicator}>\n                <ActivityIndicator \n                size='large' \n                color='black'\n                />\n            </View>\n        )\n    }\n    return (\n        <View style={styles.container}>\n            <View style={styles.userGallery}>\n                <FlatList\n                numColumns={1}\n                horizontal={false}\n                data={posts}\n                renderItem={({item}) => (\n                    <View style={{marginTop: 15}}>\n                        <PostCreatorInfo>\n                            <TouchableOpacity\n                            onPress={() => props.navigation.navigate(\"Profile\", {uid: item.user.uid})}>\n                                <UserAvatar\n                                source={require('../../placeholder-images/Profile_avatar_placeholder_large.png')}/>\n                            </TouchableOpacity>\n                            <View style={{height: \"100%\", marginLeft: 7}}>\n                                <NickName style={{marginTop: 4}}>{item.user.name}</NickName>\n                                <Text style={{marginTop: 3}}>{item.caption}</Text>\n                            </View>\n                        </PostCreatorInfo>\n                        <Image\n                        style={styles.image} \n                        source={{uri: item.downloadURL}}/>\n                        {item.currentUserLike ? \n                        (\n                            <TouchableOpacity style={{marginLeft:2}} onPress={() => \n                                onDislikePress(item.user.uid, item.id)}>\n                                <MarerialCommunityIcons name=\"heart\" color=\"#E94D4D\" size={30}/>\n                            </TouchableOpacity>\n                        ) : \n                        (\n                            <TouchableOpacity style={{marginLeft:2}} onPress={() => \n                                onLikePress(item.user.uid, item.id)}>\n                                <MarerialCommunityIcons name=\"heart-outline\" color=\"#E94D4D\" size={30}/>\n                            </TouchableOpacity>\n                        )}\n                        <Text style={{marginLeft: 5}}\n                        onPress={() => props.navigation.navigate(\n                            \"Comments\", \n                            {\n                                postId: item.id,\n                                uid: item.user.uid\n                                })}>\n                            View all comments...\n                        </Text>\n                    </View>\n                )}/>\n            </View>\n        </View>\n    )\n}\n\nconst styles = StyleSheet.create({\n    container: {\n        flex: 1,\n        marginTop: 40\n    },\n    userInfo: {\n        margin: 20\n    },\n    userGallery: {\n        flex: 1\n    },\n    imageContainer:{\n        flex: 1/3,\n        marginTop: 15\n    },\n    image:{\n        flex:1,\n        aspectRatio: 1/1\n    },\n    indicator:{\n        flex:1, \n        justifyContent: 'center'\n    }\n})\nconst mapStateToProps = (state) => ({\n    currentUser: state.userState.currentUser,\n    following: state.userState.following,\n    feed: state.usersState.feed,\n    usersFollowingLoaded: state.usersState.usersFollowingLoaded\n})\n\nexport default connect(mapStateToProps, null)(Feed)"]},"metadata":{},"sourceType":"module"}